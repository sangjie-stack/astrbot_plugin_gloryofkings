<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>王者荣耀主页</title>
    <style>
        @charset "UTF-8";
        @font-face {
          font-family: Number;
          src: url(file:///{{ plugin_dir }}/resources/font/tttgbnumber.woff) format("woff"), url(file:///{{ plugin_dir }}/resources/font/tttgbnumber.ttf) format("truetype");
        }
        @font-face {
          font-family: YS;
          src: url(file:///{{ plugin_dir }}/resources/font/HYWH-65W.woff) format("woff"), url(file:///{{ plugin_dir }}/resources/font/HYWH-65W.ttf) format("truetype");
        }
        body {
          font-family: YS, Arial, sans-serif;
          background-color: #efefef;
          margin: 0 auto;
          padding: 30px;
          width: 1050px;
          transform: scale(3);
          transform-origin: 0 0;
        }

        :root {
          --item-bg-color: #ffffff;
        }

        .card {
          {% if bg_img_base64 %}
          background-image: url('data:image/png;base64,{{ bg_img_base64 }}');
          {% else %}
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          {% endif %}
          background-size: 100% 100%;
          background-repeat: no-repeat;
          background-position: center;
          border-radius: 21px;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
          width: 1050px;
          overflow: hidden;
        }

        .card-header {
          display: flex;
          align-items: center;
          padding: 20px;
          border-bottom: 2px solid #7e7e7e;
        }
        .card-header .avatar {
          width: 80px;
          height: 80px;
          border-radius: 50%;
          margin-right: 20px;
          object-fit: cover;
        }
        .card-header .user-info {
          flex-grow: 1;
        }
        .card-header .user-info .username {
          font-size: 24px;
          font-weight: bold;
          margin: 0 0 5px 0;
          color: #333;
        }
        .card-header .user-info .badge {
          display: inline-block;
          padding: 3px 8px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: bold;
        }
        .card-header .user-info .level {
          background-color: #e0e0e0;
          color: #333;
        }
        .card-header .user-info .online {
          background-color: #4caf50;
          color: white;
          margin-left: 10px;
        }
        .card-header .user-info .offline {
          background: #666;
        }
        .card-header .user-info .role {
          margin-left: 10px;
          background-color: #e0e0e0;
          color: #333;
        }

        .card-content {
          padding: 20px;
          display: flex;
          background-size: 100% 100%;
        }

        .info-section {
          flex: 2;
        }

        .info-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 15px;
          margin-bottom: 20px;
        }

        .info-item {
          display: flex;
          align-items: center;
          background-color: var(--item-bg-color);
          padding: 10px;
          border-radius: 6px;
        }
        .info-item .key {
          color: #666;
        }

        .info-icon {
          width: 24px;
          height: 24px;
          margin-right: 10px;
        }

        .rank-image-parent-container {
          display: flex;
          justify-content: center;
          align-items: center;
        }

        .rank-image-container {
          position: relative;
          width: 150px;
          height: 324px;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-left: 50px;
          margin-right: 25px;
        }
        .rank-image-container .ranking-star {
          position: absolute;
          top: -10px;
          left: 50%;
          transform: translateX(-50%);
          width: 85%;
          z-index: 3;
        }
        .rank-image-container .rank-image-background {
          position: relative;
          width: 100%;
          top: -15px;
          height: 100%;
          z-index: 1;
        }
        .rank-image-container .rank-image-honor {
          position: absolute;
          z-index: 3;
          width: 160%;
        }
        .rank-image-container .rank-image {
          position: absolute;
          top: -3%;
          width: 190%;
          height: auto;
          z-index: 2;
        }
        .rank-image-container .rank-badge {
          position: absolute;
          top: 75%;
          background-color: rgba(255, 255, 255, 0.8274509804);
          color: #333;
          padding: 5px 30px;
          border-radius: 5px;
          font-size: 15px;
          font-weight: bold;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
          white-space: nowrap;
          z-index: 3;
        }
        .rank-image-container .star-number {
          position: absolute;
          top: 35px;
          z-index: 3;
          color: #ffffff;
          display: flex;
          font-size: 18px;
        }
        .rank-image-container .star-number img {
          width: 20px;
          height: 20px;
          margin-right: 10px;
        }
        .rank-image-container .rank-modePeakRace-cube {
          width: 100%;
          position: absolute;
          z-index: 2;
          top: 0;
        }
        .rank-image-container .rank-modePeakRace-avatar {
          z-index: 2;
          width: 35px;
          height: 35px;
          border-radius: 50%;
          position: absolute;
          top: 44%;
        }
        .rank-image-container .rank-modePeakRace-avatar img {
          position: absolute;
          width: 100%;
          height: 100%;
          border-radius: 50%;
        }
        .rank-image-container .rank-modePeakRace-avatar .border {
          width: 66px;
          height: 66px;
          left: -16px;
          top: -16px;
        }
        .rank-image-container .rank-modePeakRace-content {
          position: absolute;
          z-index: 2;
          font-size: 15px;
          top: 60%;
          color: #EED8D7;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 15px;
          margin-top: 20px;
        }
        .stats-grid .stat-item {
          background-color: var(--item-bg-color);
          border-radius: 8px;
          padding: 15px;
          text-align: center;
          display: flex;
          flex-direction: column;
          justify-content: flex-end;
        }
        .stats-grid .stat-item .stat-value {
          font-size: 24px;
          font-weight: bold;
          color: #333;
          margin-bottom: 5px;
          position: relative;
        }
        .stats-grid .stat-item .stat-value .all {
          font-size: 15px;
          font-weight: normal;
        }
        .stats-grid .stat-item .stat-value .icon {
          width: 65px;
        }
        .stats-grid .stat-item .stat-value .content {
          z-index: 1;
        }
        .stats-grid .stat-item .stat-value .content.style113 {
          position: absolute;
          font-size: 13px;
          color: #ffffff;
          left: 50%;
          transform: translateX(-50%);
          top: 19px;
        }
        .stats-grid .stat-item .stat-value .content.style112 {
          position: absolute;
          font-size: 13px;
          color: #ffffff;
          left: 50%;
          transform: translateX(-50%);
          top: 22px;
        }
        .stats-grid .stat-item .stat-value .content.style110 {
          display: none;
        }
        .stats-grid .stat-item .stat-value .content.style111 {
          position: absolute;
          font-size: 13px;
          color: #ffffff;
          left: 50%;
          transform: translateX(-50%);
          top: 29px;
        }
        .stats-grid .stat-item .stat-value .content.style102 {
          margin-bottom: 10px;
        }
        .stats-grid .stat-item .stat-label {
          font-size: 14px;
          color: #666;
        }

        .stat-combat {
          display: flex;
          width: 100%;
          justify-content: center;
          align-items: center;
          margin-top: 20px;
          border-top: 1px dashed #6c6c6c;
          padding-top: 10px;
          font-size: 20px;
        }
        .stat-combat .icon {
          width: 40px;
          border-radius: 10px;
          border: 1px solid #fff;
          margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="card-header">
            <img src="{{ roleIcon }}" alt="用户头像" class="avatar">
            <div class="user-info">
                <h2 class="username">{{ roleName }}</h2>
                <span class="badge level">等级 {{ gameLevel }}</span>
                <span class="badge role">{{ roleText }}</span>
                <span class="badge online{% if isOffline %} offline{% endif %}">{{ gameOnline }}</span>
            </div>
        </div>
        <div class="card-content">
            <div class="info-section">
                <div class="info-grid">
                    <div class="info-item">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9H4.5a2.5 2.5 0 0 1 0-5H6'/%3E%3Cpath d='M18 9h1.5a2.5 2.5 0 0 0 0-5H18'/%3E%3Cpath d='M4 22h16'/%3E%3Cpath d='M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22'/%3E%3Cpath d='M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22'/%3E%3Cpath d='M18 2H6v7a6 6 0 0 0 12 0V2Z'/%3E%3C/svg%3E"
                            alt="奖杯图标" class="info-icon">
                        <span class="key">10v10段位：</span><span>{{ rank10v10 }}</span>
                    </div>
                    <div class="info-item">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9H4.5a2.5 2.5 0 0 1 0-5H6'/%3E%3Cpath d='M18 9h1.5a2.5 2.5 0 0 0 0-5H18'/%3E%3Cpath d='M4 22h16'/%3E%3Cpath d='M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22'/%3E%3Cpath d='M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22'/%3E%3Cpath d='M18 2H6v7a6 6 0 0 0 12 0V2Z'/%3E%3C/svg%3E"
                            alt="奖杯图标" class="info-icon">
                        <span class="key">5v5段位：</span><span>{{ rank5v5 }}</span>
                    </div>
                    <div class="info-item">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'/%3E%3Cpolyline points='12 6 12 12 16 14'/%3E%3C/svg%3E"
                            alt="时钟图标" class="info-icon">
                        <span class="key">上次上线：</span><span>{{ onlineTime }}</span>
                    </div>
                    <div class="info-item">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M18.36 6.64a9 9 0 1 1-12.73 0'/%3E%3Cline x1='12' y1='2' x2='12' y2='12'/%3E%3C/svg%3E"
                            alt="关机图标" class="info-icon">
                        <span class="key">上次离线：</span><span>{{ offlineTime }}</span>
                    </div>
                </div>
                <div class="stats-grid">
                    {% for v in mod %}
                    <div class="stat-item">
                        <div class="stat-value">
                            {% if v.icon %}
                            <img src="{{ v.icon }}" alt="" class="icon">
                            {% endif %}
                            <div class="content style{{ v.showStyle }}">{{ v.content }}</div>
                        </div>
                        <div class="stat-label">{{ v.name }}</div>
                    </div>
                    {% endfor %}
                </div>
                {% if combat %}
                <div class="stat-combat">
                    <img src="{{ combat.icon }}" alt="" class="icon">
                    {{ combat.name }}: {{ combat.content }}
                </div>
                {% endif %}
            </div>
            <div class="rank-image-parent-container">
                <div class="rank-image-container">
                    {% if flag_img_base64 %}
                    <img src="data:image/png;base64,{{ flag_img_base64 }}" alt="段位图片" class="rank-image-background">
                    {% endif %}
                    <img src="{{ rankIcon }}" alt="段位图片" class="rank-image">
                    <img src="{{ starImg }}" alt="" class="ranking-star">
                    {% if honor_img_base64 %}
                    <img src="data:image/png;base64,{{ honor_img_base64 }}" class="rank-image-honor">
                    {% endif %}
                    {% if isKing and star_img_base64 %}
                    <div class="star-number">
                        <img src="data:image/png;base64,{{ star_img_base64 }}" alt="">
                        × {{ rankingStar }}
                    </div>
                    {% endif %}
                    <div class="rank-badge">{{ rank5v5 }}</div>
                </div>
            </div>
            <div class="rank-image-parent-container">
                <div class="rank-image-container">
                    {% if peak_flag_img_base64 %}
                    <img src="data:image/png;base64,{{ peak_flag_img_base64 }}" alt="段位图片"
                        class="rank-image-background">
                    {% endif %}
                    <img src="{{ modePeakRace.icon }}" alt="段位图片" class="rank-image">
                    {% if cube_img_base64 %}
                    <img src="data:image/png;base64,{{ cube_img_base64 }}" alt="" class="rank-modePeakRace-cube">
                    {% endif %}
                    <div class="rank-modePeakRace-avatar">
                        <img src="{{ modePeakRace.param1.roleIcon }}" alt="" class="avatar">
                        {% if peak_avatar_border_base64 %}
                        <img src="data:image/png;base64,{{ peak_avatar_border_base64 }}" alt="" class="border">
                        {% endif %}
                    </div>
                    <div class="rank-modePeakRace-content">{{ modePeakRace.param1.desc }}</div>
                    <div class="rank-badge">巅峰赛</div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    const doc = document.querySelectorAll(".stats-grid .stat-item .stat-value");

    doc.forEach((item) => {
        if (/[\/\.]/.test(item.textContent)) {
            const s = item.textContent.replace(/([\/\.])/, "_$1").split("_")
            if (s.length > 1) {
                item.innerHTML = `<div class="content style102"><span>${s[0]}</span><span class="all">${s[1]}</span><div>`
            }
        }
    });
    const modePeakRace_content = document.querySelector(".rank-modePeakRace-content");
    if (modePeakRace_content && !/^\d+$/.test(modePeakRace_content.textContent)) {
        modePeakRace_content.style.fontSize = "9px";
        modePeakRace_content.style.color = "#ffffffd3";
    }
</script>
</html>
